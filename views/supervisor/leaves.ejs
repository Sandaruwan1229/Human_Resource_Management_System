<%- include('_header',{title:"Leaves"}) %>

<%- include('_sidebar',{title:"Leaves"}) %>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0">Leaves</h1>
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="/supervisor">Home</a></li>
                            <li class="breadcrumb-item active">Leaves </li>
                        </ol>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-sm-12">
                        <h3 class="m-0" style="text-align: center;">Leaving Requests</h3>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="card-body">
                        <% if(requestLst.length>0){ %>
                        <table class="table table-bordered table-hover" style="text-align: center;">
                            <thead>
                                <tr>
                                    <th style="width: 10px">#</th>
                                    <th>Leave ID</th>
                                    <th>Employee ID</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Leave Tpye</th>
                                    <th>Leave</th>
                                </tr>
                            </thead>
                            <tbody>

                                <% for (var i = 0; i < requestLst.length; i++) { %>
                                <tr>
                                    <td><%=i+1%></td>
                                    <td><%= requestLst[i].leave_id  %></td>
                                    <td><%= requestLst[i].employee_id  %></td>
                                    <td><%= requestLst[i].first_name  %></td>
                                    <td><%= requestLst[i].last_name  %></td>
                                    <td><%= requestLst[i].leave_type  %></td>
                                    <td class="text py-0 align-middle" style="text-align: center;">
                                        <div class="btn-group btn-group-sm">
                                            <a href="/supervisor/leaveRequest/<%= requestLst[i].leave_id%>"
                                                class="btn btn-info"><i class="fas fa-eye"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <% } %>
                            </tbody>
                        </table>
                        <% } else{ %>
                        <div class="p-2">
                            <p>No Leaving Requests</p>
                        </div>
                        <% } %>

                    </div>
                </div>

            </div>
        </div>
    </section>

</div>
<footer class="main-footer">
    <div class="float-right d-none d-sm-block">
        <b>All rights reserved</b>
    </div>
    <strong>Copyright &copy; 2021 <a>DBMS Project-Group 15</a>.</strong>
</footer>
<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    var btn1 = document.getElementById("myBtn1");

    // When the user clicks the button, open the modal 
    btn.onclick = function () {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }
    btn1.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>

</body>
<%- include('_footer') %>